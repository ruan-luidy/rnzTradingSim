<UserControl
  x:Class="rnzTradingSim.Views.CoinCreationView"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:hc="https://handyorg.github.io/handycontrol"
  xmlns:local="clr-namespace:rnzTradingSim.Views"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:vm="clr-namespace:rnzTradingSim.ViewModels"
  d:DataContext="{d:DesignInstance Type=vm:CoinCreationViewModel}"
  d:DesignHeight="800"
  d:DesignWidth="1150"
  Background="{StaticResource DarkBackgroundBrush}"
  mc:Ignorable="d">

  <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
    <Grid Margin="50">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
      </Grid.RowDefinitions>

      <!--  Header  -->
      <Border Grid.Row="0" Padding="40,30,40,20">
        <StackPanel>
          <TextBlock
            Foreground="White"
            Style="{StaticResource TextBlockLargeBold}"
            Text="Create Your Coin" />
          <TextBlock
            Margin="0,5,0,0"
            Foreground="{DynamicResource SecondaryTextBrush}"
            Style="{StaticResource TextBlockDefault}"
            Text="Launch your own meme coin and watch it moon (or get rugged)! ðŸš€" />
        </StackPanel>
      </Border>

      <!--  Cost Info  -->
      <Border Grid.Row="1" Padding="40,0,40,30">
        <Border
          Padding="20,15"
          Background="#1a4d1a"
          BorderBrush="#22c55e"
          BorderThickness="1"
          CornerRadius="8">
          <StackPanel Orientation="Horizontal">
            <TextBlock
              Margin="0,0,10,0"
              VerticalAlignment="Center"
              FontSize="16"
              Text="ðŸ’°" />
            <TextBlock
              VerticalAlignment="Center"
              FontSize="14"
              Foreground="#22c55e"
              Text="{Binding TotalCostText}" />
          </StackPanel>
        </Border>
      </Border>

      <!--  Main Form  -->
      <Border Grid.Row="2" Padding="40,0,40,40">
        <Grid>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="20" />
            <ColumnDefinition Width="300" />
          </Grid.ColumnDefinitions>

          <!--  Left Side - Form  -->
          <StackPanel Grid.Column="0">

            <!--  Basic Info Section  -->
            <Border
              Margin="0,0,0,20"
              Padding="30,25"
              Background="{DynamicResource CardBackgroundBrush}"
              BorderBrush="{DynamicResource BorderBrush}"
              BorderThickness="1"
              CornerRadius="12">

              <StackPanel>
                <TextBlock
                  Margin="0,0,0,20"
                  FontSize="18"
                  FontWeight="SemiBold"
                  Foreground="White"
                  Text="Basic Information" />

                <!--  Coin Name  -->
                <StackPanel Margin="0,0,0,20">
                  <TextBlock
                    Margin="0,0,0,8"
                    FontSize="14"
                    FontWeight="Medium"
                    Text="Coin Name *" />
                  <hc:TextBox
                    x:Name="CoinNameTextBox"
                    Height="40"
                    hc:BorderElement.CornerRadius="8"
                    hc:InfoElement.Placeholder="e.g., Dogecoin, Shiba Inu"
                    FontSize="14"
                    Text="{Binding CoinName, UpdateSourceTrigger=PropertyChanged}" />
                  <TextBlock
                    Margin="0,5,0,0"
                    FontSize="12"
                    Foreground="#ef4444"
                    Text="{Binding NameValidationMessage}">
                    <TextBlock.Style>
                      <Style TargetType="TextBlock">
                        <Style.Triggers>
                          <DataTrigger Binding="{Binding NameValidationMessage}" Value="">
                            <Setter Property="Visibility" Value="Collapsed" />
                          </DataTrigger>
                        </Style.Triggers>
                      </Style>
                    </TextBlock.Style>
                  </TextBlock>
                </StackPanel>

                <!--  Coin Symbol  -->
                <StackPanel Margin="0,0,0,20">
                  <TextBlock
                    Margin="0,0,0,8"
                    FontSize="14"
                    FontWeight="Medium"
                    Text="Symbol *" />
                  <hc:TextBox
                    x:Name="CoinSymbolTextBox"
                    Height="40"
                    hc:BorderElement.CornerRadius="8"
                    hc:InfoElement.Placeholder="e.g., DOGE, SHIB"
                    CharacterCasing="Upper"
                    FontSize="14"
                    Text="{Binding CoinSymbol, UpdateSourceTrigger=PropertyChanged}" />
                  <TextBlock
                    Margin="0,5,0,0"
                    FontSize="12"
                    Foreground="#ef4444"
                    Text="{Binding SymbolValidationMessage}">
                    <TextBlock.Style>
                      <Style TargetType="TextBlock">
                        <Style.Triggers>
                          <DataTrigger Binding="{Binding SymbolValidationMessage}" Value="">
                            <Setter Property="Visibility" Value="Collapsed" />
                          </DataTrigger>
                        </Style.Triggers>
                      </Style>
                    </TextBlock.Style>
                  </TextBlock>
                </StackPanel>

                <!--  Description  -->
                <StackPanel>
                  <TextBlock
                    Margin="0,0,0,8"
                    FontSize="14"
                    FontWeight="Medium"
                    Text="Description *" />
                  <hc:TextBox
                    Height="80"
                    hc:BorderElement.CornerRadius="8"
                    hc:InfoElement.Placeholder="Tell the world what makes your coin special..."
                    AcceptsReturn="True"
                    FontSize="14"
                    Text="{Binding Description, UpdateSourceTrigger=PropertyChanged}"
                    TextWrapping="Wrap" />
                </StackPanel>
              </StackPanel>
            </Border>

            <!--  Economics Section  -->
            <Border
              Margin="0,0,0,20"
              Padding="30,25"
              Background="{DynamicResource CardBackgroundBrush}"
              BorderBrush="{DynamicResource BorderBrush}"
              BorderThickness="1"
              CornerRadius="12">

              <StackPanel>
                <TextBlock
                  Margin="0,0,0,20"
                  FontSize="18"
                  FontWeight="SemiBold"
                  Foreground="White"
                  Text="Token Economics" />

                <Grid>
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="20" />
                    <ColumnDefinition Width="*" />
                  </Grid.ColumnDefinitions>

                  <!--  Total Supply  -->
                  <StackPanel Grid.Column="0">
                    <TextBlock
                      Margin="0,0,0,8"
                      FontSize="14"
                      FontWeight="Medium"
                      Text="Total Supply *" />
                    <hc:NumericUpDown
                      Height="40"
                      hc:BorderElement.CornerRadius="8"
                      DecimalPlaces="0"
                      FontSize="14"
                      Maximum="1000000000"
                      Minimum="1000000"
                      Value="{Binding TotalSupply}" />
                    <TextBlock
                      Margin="0,5,0,0"
                      FontSize="11"
                      Foreground="{DynamicResource SecondaryTextBrush}"
                      Text="Min: 1M, Max: 1B tokens" />
                  </StackPanel>

                  <!--  Initial Liquidity  -->
                  <StackPanel Grid.Column="2">
                    <TextBlock
                      Margin="0,0,0,8"
                      FontSize="14"
                      FontWeight="Medium"
                      Text="Initial Liquidity *" />
                    <hc:NumericUpDown
                      Height="40"
                      hc:BorderElement.CornerRadius="8"
                      DecimalPlaces="2"
                      FontSize="14"
                      Maximum="50000"
                      Minimum="100"
                      Value="{Binding InitialLiquidity}" />
                    <TextBlock
                      Margin="0,5,0,0"
                      FontSize="11"
                      Foreground="{DynamicResource SecondaryTextBrush}"
                      Text="Min: $100, Max: $50k" />
                  </StackPanel>
                </Grid>

                <!--  Initial Price Display  -->
                <Border
                  Margin="0,20,0,0"
                  Padding="15,10"
                  Background="{DynamicResource SecondaryRegionBrush}"
                  CornerRadius="6">
                  <StackPanel Orientation="Horizontal">
                    <TextBlock
                      Margin="0,0,10,0"
                      FontSize="14"
                      Text="ðŸ’¡" />
                    <TextBlock
                      FontSize="14"
                      Foreground="{DynamicResource SecondaryTextBrush}"
                      Text="Initial Price: " />
                    <TextBlock
                      FontSize="14"
                      FontWeight="SemiBold"
                      Text="{Binding InitialPriceText}" />
                  </StackPanel>
                </Border>
              </StackPanel>
            </Border>

            <!--  Action Buttons  -->
            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
              <Button
                Width="120"
                Height="40"
                Margin="0,0,15,0"
                hc:BorderElement.CornerRadius="8"
                Command="{Binding ClearFormCommand}"
                Content="Clear Form"
                Style="{StaticResource ButtonDefault}" />

              <Button
                Width="140"
                Height="40"
                hc:BorderElement.CornerRadius="8"
                Background="{StaticResource RugplayPrimaryBrush}"
                BorderBrush="{StaticResource RugplayPrimaryBrush}"
                Command="{Binding CreateCoinCommand}"
                Content="Create Coin ðŸš€"
                FontWeight="SemiBold"
                Foreground="White"
                IsEnabled="{Binding CanCreateCoin}" />
            </StackPanel>
          </StackPanel>

          <!--  Right Side - Preview  -->
          <StackPanel Grid.Column="2">
            <Border
              Padding="25,20"
              Background="{DynamicResource CardBackgroundBrush}"
              BorderBrush="{DynamicResource BorderBrush}"
              BorderThickness="1"
              CornerRadius="12">

              <StackPanel>
                <TextBlock
                  Margin="0,0,0,20"
                  HorizontalAlignment="Center"
                  FontSize="16"
                  FontWeight="SemiBold"
                  Foreground="White"
                  Text="Live Preview" />

                <!--  Icon Upload Area  -->
                <Border
                  Height="100"
                  Margin="0,0,0,15"
                  Background="#1a1a1a"
                  BorderBrush="#333333"
                  BorderThickness="1"
                  CornerRadius="8">

                  <Button
                    Background="Transparent"
                    BorderThickness="0"
                    Command="{Binding SelectIconCommand}"
                    Cursor="Hand">
                    <StackPanel>
                      <Image
                        Width="40"
                        Height="40"
                        Margin="0,0,0,8"
                        Source="{Binding CoinIconSource}">
                        <Image.Style>
                          <Style TargetType="Image">
                            <Style.Triggers>
                              <DataTrigger Binding="{Binding CoinIconSource}" Value="{x:Null}">
                                <Setter Property="Visibility" Value="Collapsed" />
                              </DataTrigger>
                            </Style.Triggers>
                          </Style>
                        </Image.Style>
                      </Image>

                      <StackPanel>
                        <StackPanel.Style>
                          <Style TargetType="StackPanel">
                            <Style.Triggers>
                              <DataTrigger Binding="{Binding CoinIconSource}" Value="{x:Null}">
                                <Setter Property="Visibility" Value="Visible" />
                              </DataTrigger>
                            </Style.Triggers>
                            <Setter Property="Visibility" Value="Collapsed" />
                          </Style>
                        </StackPanel.Style>

                        <TextBlock
                          HorizontalAlignment="Center"
                          FontSize="20"
                          Text="ðŸ“·" />
                        <TextBlock
                          HorizontalAlignment="Center"
                          FontSize="11"
                          Foreground="{DynamicResource SecondaryTextBrush}"
                          Text="Click to upload icon" />
                      </StackPanel>
                    </StackPanel>
                  </Button>
                </Border>

                <!--  Coin Info Preview  -->
                <StackPanel>
                  <!--  Name & Symbol  -->
                  <StackPanel
                    Margin="0,0,0,10"
                    HorizontalAlignment="Center"
                    Orientation="Horizontal">
                    <TextBlock
                      FontSize="16"
                      FontWeight="SemiBold"
                      Text="{Binding CoinName, FallbackValue='Your Coin'}" />
                    <TextBlock
                      Margin="6,0,0,0"
                      FontSize="14"
                      Foreground="{DynamicResource SecondaryTextBrush}"
                      Text="{Binding CoinSymbol, StringFormat=(\{0\}), FallbackValue='(SYMBOL)'}" />
                  </StackPanel>

                  <!--  Stats  -->
                  <StackPanel Margin="0,0,0,10">
                    <Grid Margin="0,0,0,5">
                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                      </Grid.ColumnDefinitions>
                      <TextBlock FontSize="12" Text="Total Supply:" />
                      <TextBlock
                        Grid.Column="1"
                        FontSize="12"
                        Text="{Binding TotalSupply, StringFormat=\{0:N0\}}" />
                    </Grid>

                    <Grid Margin="0,0,0,5">
                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                      </Grid.ColumnDefinitions>
                      <TextBlock FontSize="12" Text="Initial Price:" />
                      <TextBlock
                        Grid.Column="1"
                        FontSize="12"
                        Text="{Binding InitialPriceText}" />
                    </Grid>

                    <Grid>
                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                      </Grid.ColumnDefinitions>
                      <TextBlock FontSize="12" Text="Market Cap:" />
                      <TextBlock
                        Grid.Column="1"
                        FontSize="12"
                        Text="{Binding MarketCapText}" />
                    </Grid>
                  </StackPanel>

                  <!--  Description Preview  -->
                  <Border
                    Padding="10"
                    Background="#1a1a1a"
                    CornerRadius="6">
                    <TextBlock
                      MaxHeight="60"
                      FontSize="11"
                      Foreground="{DynamicResource SecondaryTextBrush}"
                      Text="{Binding Description, FallbackValue='Your coin description will appear here...'}"
                      TextTrimming="CharacterEllipsis"
                      TextWrapping="Wrap" />
                  </Border>
                </StackPanel>
              </StackPanel>
            </Border>
          </StackPanel>
        </Grid>
      </Border>
    </Grid>
  </ScrollViewer>
</UserControl>
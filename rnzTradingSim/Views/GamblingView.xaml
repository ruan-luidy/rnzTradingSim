<UserControl
  x:Class="rnzTradingSim.Views.GamblingView"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:games="clr-namespace:rnzTradingSim.Views.Games"
  xmlns:hc="https://handyorg.github.io/handycontrol">

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <!--  Header with Game Tabs  -->
    <StackPanel Grid.Row="0" Margin="0,0,0,20">

      <!--  Title  -->
      <TextBlock
        Margin="0,0,0,20"
        HorizontalAlignment="Center"
        FontSize="28"
        FontWeight="Bold"
        Text="Gambling Games" />

      <!--  Game Selection Tabs  -->
      <hc:Card Padding="15">
        <StackPanel>
          <TextBlock
            Margin="0,0,0,10"
            FontSize="14"
            FontWeight="Bold"
            Text="Select Game" />

          <ItemsControl ItemsSource="{Binding GameTabs}">
            <ItemsControl.ItemsPanel>
              <ItemsPanelTemplate>
                <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" />
              </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
              <DataTemplate>
                <Button
                  Width="120"
                  Height="50"
                  Margin="5,0"
                  Command="{Binding DataContext.SelectGameCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                  CommandParameter="{Binding Name}">
                  <Button.Style>
                    <Style BasedOn="{StaticResource ButtonPrimary}" TargetType="Button">
                      <Style.Triggers>
                        <DataTrigger Binding="{Binding IsSelected}" Value="True">
                          <Setter Property="Background" Value="{DynamicResource PrimaryBrush}" />
                        </DataTrigger>
                      </Style.Triggers>
                    </Style>
                  </Button.Style>
                  <StackPanel>
                    <TextBlock FontSize="18" Text="{Binding Icon}" />
                    <TextBlock
                      FontSize="12"
                      FontWeight="Bold"
                      Text="{Binding Name}" />
                  </StackPanel>
                </Button>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>
        </StackPanel>
      </hc:Card>
    </StackPanel>

    <!--  Game Content Area  -->
    <Grid Grid.Row="1">

      <!--  Mines Game  -->
      <games:MinesView DataContext="{Binding MinesViewModel}" Visibility="{Binding SelectedGame, Converter={StaticResource String2VisibilityConverter}, ConverterParameter=Mines}" />

      <!--  Coinflip Game (Placeholder)  -->
      <Border Visibility="{Binding SelectedGame, Converter={StaticResource String2VisibilityConverter}, ConverterParameter=Coinflip}">
        <hc:Card Padding="40">
          <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
            <TextBlock
              Margin="0,0,0,20"
              HorizontalAlignment="Center"
              FontSize="48"
              Text="🪙" />
            <TextBlock
              HorizontalAlignment="Center"
              FontSize="24"
              FontWeight="Bold"
              Text="Coinflip" />
            <TextBlock
              HorizontalAlignment="Center"
              FontSize="16"
              Opacity="0.7"
              Text="Coming Soon!" />
          </StackPanel>
        </hc:Card>
      </Border>

      <!--  Slots Game (Placeholder)  -->
      <Border Visibility="{Binding SelectedGame, Converter={StaticResource String2VisibilityConverter}, ConverterParameter=Slots}">
        <hc:Card Padding="40">
          <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
            <TextBlock
              HorizontalAlignment="Center"
              FontSize="24"
              FontWeight="Bold"
              Text="Slots" />
            <TextBlock
              HorizontalAlignment="Center"
              FontSize="16"
              Opacity="0.7"
              Text="Coming Soon!" />
          </StackPanel>
        </hc:Card>
      </Border>

      <!--  Dice Game (Placeholder)  -->
      <Border Visibility="{Binding SelectedGame, Converter={StaticResource String2VisibilityConverter}, ConverterParameter=Dice}">
        <hc:Card Padding="40">
          <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
            <TextBlock
              HorizontalAlignment="Center"
              FontSize="24"
              FontWeight="Bold"
              Text="Dice" />
            <TextBlock
              HorizontalAlignment="Center"
              FontSize="16"
              Opacity="0.7"
              Text="Coming Soon!" />
          </StackPanel>
        </hc:Card>
      </Border>

    </Grid>
  </Grid>
</UserControl>
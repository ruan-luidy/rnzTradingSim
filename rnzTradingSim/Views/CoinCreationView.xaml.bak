<UserControl x:Class="rnzTradingSim.Views.CoinCreationView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:hc="https://handyorg.github.io/handycontrol">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Creation Form -->
        <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto" Margin="0,0,20,0">
            <StackPanel>
                <!-- Header -->
                <Border Background="{DynamicResource RegionBrush}" CornerRadius="10" Margin="0,0,0,20" Padding="20">
                    <StackPanel>
                        <TextBlock Text="Create New Coin" FontSize="24" FontWeight="Bold" Margin="0,0,0,10"/>
                        <TextBlock Text="Design your own cryptocurrency and launch it to the market" FontSize="14" 
                                 Foreground="{DynamicResource SecondaryTextBrush}"/>
                    </StackPanel>
                </Border>

                <!-- Basic Info -->
                <hc:Card Margin="0,0,0,20">
                    <StackPanel>
                        <TextBlock Text="Basic Information" FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="Coin Name" Margin="0,0,0,5"/>
                                <hc:TextBox Text="{Binding CoinName}" hc:InfoElement.Placeholder="e.g., My Awesome Coin"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                <TextBlock Text="Symbol" Margin="0,0,0,5"/>
                                <hc:TextBox Text="{Binding CoinSymbol}" hc:InfoElement.Placeholder="e.g., MAC" CharacterCasing="Upper" MaxLength="5"/>
                            </StackPanel>
                        </Grid>
                        
                        <TextBlock Text="Description" Margin="0,15,0,5"/>
                        <hc:TextBox Text="{Binding Description}" AcceptsReturn="True" Height="80" TextWrapping="Wrap"
                                   hc:InfoElement.Placeholder="Describe your coin's purpose and unique features..."/>
                        
                        <Grid Margin="0,15,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="Initial Supply" Margin="0,0,0,5"/>
                                <hc:NumericUpDown Value="{Binding InitialSupply}" Minimum="1000" Maximum="1000000000" Increment="1000"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                <TextBlock Text="Launch Price ($)" Margin="0,0,0,5"/>
                                <hc:NumericUpDown Value="{Binding LaunchPrice}" Minimum="0.0001" Maximum="1000" Increment="0.01" DecimalPlaces="4"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </hc:Card>

                <!-- Advanced Settings -->
                <hc:Card Margin="0,0,0,20">
                    <StackPanel>
                        <TextBlock Text="Advanced Settings" FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="Volatility Level" Margin="0,0,0,5"/>
                                <hc:ComboBox SelectedItem="{Binding VolatilityLevel}">
                                    <ComboBoxItem Content="Stable (Low Risk)"/>
                                    <ComboBoxItem Content="Normal (Medium Risk)"/>
                                    <ComboBoxItem Content="Volatile (High Risk)"/>
                                    <ComboBoxItem Content="Extreme (Very High Risk)"/>
                                </hc:ComboBox>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                <TextBlock Text="Market Cap Goal ($)" Margin="0,0,0,5"/>
                                <hc:NumericUpDown Value="{Binding MarketCapGoal}" Minimum="10000" Maximum="100000000" Increment="10000"/>
                            </StackPanel>
                        </Grid>
                        
                        <CheckBox Content="Enable Auto-Burn (Deflationary)" IsChecked="{Binding IsDeflationary}" Margin="0,15,0,0"/>
                        <CheckBox Content="Allow Staking Rewards" IsChecked="{Binding AllowStaking}" Margin="0,5,0,0"/>
                        <CheckBox Content="Community Governance" IsChecked="{Binding HasGovernance}" Margin="0,5,0,0"/>
                    </StackPanel>
                </hc:Card>

                <!-- Liquidity Setup -->
                <hc:Card Margin="0,0,0,20">
                    <StackPanel>
                        <TextBlock Text="Initial Liquidity" FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="Your Investment ($)" Margin="0,0,0,5"/>
                                <hc:NumericUpDown Value="{Binding InitialInvestment}" Minimum="100" Maximum="{Binding PlayerBalance}" Increment="100"/>
                                <TextBlock Text="{Binding PlayerBalance, StringFormat='Available: ${0:N2}'}" FontSize="10" 
                                         Foreground="{DynamicResource SecondaryTextBrush}" Margin="0,2,0,0"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                <TextBlock Text="Tokens to Lock" Margin="0,0,0,5"/>
                                <hc:NumericUpDown Value="{Binding TokensToLock}" Minimum="100" Maximum="{Binding InitialSupply}" Increment="100"/>
                                <TextBlock Text="{Binding LockPercentage, StringFormat='{0:P1} of supply'}" FontSize="10" 
                                         Foreground="{DynamicResource SecondaryTextBrush}" Margin="0,2,0,0"/>
                            </StackPanel>
                        </Grid>
                        
                        <TextBlock Text="⚠️ Locked tokens cannot be withdrawn for 24 hours" FontSize="12" 
                                 Foreground="{DynamicResource WarningBrush}" Margin="0,10,0,0"/>
                    </StackPanel>
                </hc:Card>

                <!-- Creation Cost -->
                <Border Background="{DynamicResource InfoBrush}" CornerRadius="5" Padding="15" Margin="0,0,0,20">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="Creation Cost" FontWeight="Bold" Foreground="White"/>
                            <TextBlock Text="Platform fee + Initial liquidity" FontSize="12" Foreground="White" Opacity="0.8"/>
                        </StackPanel>
                        
                        <TextBlock Grid.Column="1" Text="{Binding TotalCost, StringFormat='${0:N2}'}" FontSize="20" 
                                 FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                    </Grid>
                </Border>

                <!-- Create Button -->
                <hc:Button Content="CREATE COIN" Command="{Binding CreateCoinCommand}" Style="{StaticResource ButtonPrimary}" 
                          Height="50" FontSize="16" FontWeight="Bold" IsEnabled="{Binding CanCreateCoin}"/>
            </StackPanel>
        </ScrollViewer>

        <!-- Preview -->
        <Border Grid.Column="1" Background="{DynamicResource RegionBrush}" CornerRadius="10" Padding="20">
            <StackPanel>
                <TextBlock Text="Preview" FontSize="18" FontWeight="Bold" Margin="0,0,0,20"/>
                
                <!-- Coin Card Preview -->
                <Border Background="{DynamicResource CardBackground}" CornerRadius="10" Padding="15" Margin="0,0,0,20">
                    <StackPanel>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <Border Grid.Column="0" Background="{DynamicResource PrimaryBrush}" CornerRadius="20" Width="40" Height="40" Margin="0,0,10,0">
                                <TextBlock Text="{Binding CoinSymbol}" HorizontalAlignment="Center" VerticalAlignment="Center" 
                                         FontWeight="Bold" Foreground="White"/>
                            </Border>
                            
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="{Binding CoinName}" FontWeight="Bold" FontSize="14"/>
                                <TextBlock Text="{Binding CoinSymbol}" FontSize="12" Foreground="{DynamicResource SecondaryTextBrush}"/>
                            </StackPanel>
                        </Grid>
                        
                        <TextBlock Text="{Binding Description}" TextWrapping="Wrap" FontSize="12" Margin="0,10,0,0"/>
                        
                        <Separator Margin="0,10"/>
                        
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Price:" FontSize="10"/>
                            <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding LaunchPrice, StringFormat='${0:F4}'}" FontSize="10" HorizontalAlignment="Right"/>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Supply:" FontSize="10"/>
                            <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding InitialSupply, StringFormat='{0:N0}'}" FontSize="10" HorizontalAlignment="Right"/>
                            
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Market Cap:" FontSize="10"/>
                            <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding CalculatedMarketCap, StringFormat='${0:N0}'}" FontSize="10" HorizontalAlignment="Right"/>
                            
                            <TextBlock Grid.Row="3" Grid.Column="0" Text="Risk:" FontSize="10"/>
                            <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding VolatilityLevel}" FontSize="10" HorizontalAlignment="Right"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Market Impact -->
                <hc:Card Margin="0,0,0,20">
                    <StackPanel>
                        <TextBlock Text="Market Impact" FontWeight="Bold" Margin="0,0,0,10"/>
                        <TextBlock Text="• New listing in market" FontSize="12"/>
                        <TextBlock Text="• Liquidity pool creation" FontSize="12"/>
                        <TextBlock Text="• Available for trading" FontSize="12"/>
                        <TextBlock Text="• Eligible for leaderboards" FontSize="12"/>
                    </StackPanel>
                </hc:Card>

                <!-- Risks -->
                <hc:Card Background="{DynamicResource DangerBrush}" Opacity="0.1">
                    <StackPanel>
                        <TextBlock Text="⚠️ Risks" FontWeight="Bold" Foreground="{DynamicResource DangerBrush}"/>
                        <TextBlock Text="• Price can go to zero" FontSize="10" TextWrapping="Wrap"/>
                        <TextBlock Text="• Liquidity might be low" FontSize="10" TextWrapping="Wrap"/>
                        <TextBlock Text="• Market manipulation possible" FontSize="10" TextWrapping="Wrap"/>
                    </StackPanel>
                </hc:Card>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>